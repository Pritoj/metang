(function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};angular.module("metang",[]),angular.module("metang").directive("metang",function(){return{require:"^?metangHead",restrict:"A",scope:{options:"@metang",property:"@",name:"@",content:"@"},controller:["$scope","$element","metang",function(t,e,n){var r;r=e[0].nodeName.toLowerCase(),t.getItem=function(){var i,o,u,a,p,s,c;if(t.item)return t.item;if("title"===r||"title"===t.options)c=e.text(),("prefix"===t.options||"suffix"===t.options)&&(c={},c[t.options]=e.text()),t.item=n.title(c);else{if("meta"!==r)throw"Not supported";i={},u="",p="",a=t.property?(u="property",t.property):(u="meta",t.name),s=a.split(":"),s[1]&&(p=s[0],a=s[1]),i[a]=t.content,o=n[u](p,i),t.item=o[0]}return t.item},("title"===r||"meta"===r)&&t.$watch("item.getValue()",function(t){return"meta"===r&&e.attr("content",t),"title"===r?e.text(t):void 0})}],link:function(t,e,n,r){return r&&r.exclude?r.exclude(t.getItem().uniqId()):void 0}}}),angular.module("metang").directive("metangHead",["$compile",function(t){return{restrict:"A",scope:!0,controller:["$scope","metang",function(t,e){var n;return n=[],this.exclude=function(t){return n.push(t)},t.getItems=function(){return e.getItems()},t.isRenderItem=function(t){return-1===n.indexOf(t.uniqId())}}],link:function(e,n){var r;return r=t('<meta metang-item="item" ng-repeat="item in getItems()" ng-if="isRenderItem(item)"/>')(e),n.append(r)}}}]),angular.module("metang").directive("metangItem",["$compile",function(t){return{restrict:"A",scope:{item:"=metangItem"},link:function(e,n){var r;return r=t(e.item.template())(e),n.replaceWith(r)}}}]),angular.module("metang").factory("MetangItemAdapters",function(){var t,n;return t={},n=function(){function t(){this.nameAttr="name"}return t.prototype.getNameAttr=function(){return this.nameAttr},t.prototype.getName=function(){var t;return t=this.name,this.namespace&&(t=this.namespace+":"+t),t},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){return this.value=t},t.prototype.uniqId=function(){return this.nameAttr+this.namespace+this.name},t.prototype.template=function(){return"<meta "+this.nameAttr+'="{{item.getName()}}" content="{{item.getValue()}}">'},t}(),t.Meta=function(t){function n(t,e,r){n.__super__.constructor.call(this),this.name=t,this.namespace=r,this.setValue(e)}return e(n,t),n}(n),t.Property=function(t){function n(t,e,r){n.__super__.constructor.call(this,t,e,r),this.nameAttr="property"}return e(n,t),n}(t.Meta),t.Title=function(){function t(t){angular.extend(this.options,t||{}),this.title=""}return t.prototype.options={separator:" | "},t.prototype.setValue=function(t){return angular.isObject(t)?angular.extend(this.options,t):angular.isString(t)?this.title=t:void 0},t.prototype.getValue=function(){var t;return t=[],this.options.prefix&&t.push(this.options.prefix),this.title&&t.push(this.title),this.options.suffix&&t.push(this.options.suffix),t.join(this.options.separator)},t.prototype.uniqId=function(){return"title"},t.prototype.template=function(){return'<title ng-bing="item.getValue()"></title>'},t}(),t}),angular.module("metang").provider("metang",function(){var t,e,n,r;t={title:{},meta:{},property:{}},e=function(t){var e,n;for(e in t)if(n=t[e],t.hasOwnProperty(e))return!1;return!0},this.title=function(e){return angular.extend(t.title,e)},r=function(e,n,r){return angular.isObject(n)&&(r=n,n=""),t[e][n]||(t[e][n]={}),angular.extend(t[e][n],r)},this.meta=function(t,e){return r("meta",t,e)},this.property=function(t,e){return r("property",t,e)},n=[],this.$get=["$rootScope","MetangItemAdapters",function(i,o){var u,a,p,s,c,m;u={getItems:function(){return n}},p=function(t){var e,r,i;for(r=0,i=n.length;i>r;r++)if(e=n[r],e.uniqId()===t)return e;return!1},u.title=function(t){var e;return e=p("title"),e||(e=new o.Title,e.setValue(t),n.push(e)),e.setValue(t),e},r=function(t,e,r){var i,u,a,s,c;angular.isObject(e)&&(r=e,e=""),s=[];for(u in r)c=r[u],a=new o[t](u,c,e),i=p(a.uniqId()),i?(i.setValue(a.getValue()),s.push(i)):(s.push(a),n.push(a));return s},u.meta=function(t,e){return r("Meta",t,e)},u.property=function(t,e){return r("Property",t,e)},e(t.title)||u.title(t.title),c=t.meta;for(s in c)a=c[s],u.meta(s,a);m=t.property;for(s in m)a=m[s],u.property(s,a);return u}]})}).call(this);